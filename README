我将为您创建一个完整的用户管理REST接口示例。让我开始构建项目结构和代码文件。

首先，让我创建package.json文件：


package.json
Apply
{
  "name": "user-management-rest-api",
  "version": "1.0.0",
  "description": "用户管理REST API示例",
  "main": "app.js",
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "body-parser": "^1.20.2"
  }
}
接下来创建主应用文件app.js：


app.js
Apply
const express = require('express');
const bodyParser = require('body-parser');
const userRoutes = require('./routes/userRoutes');

const app = express();
const PORT = 3000;

// 中间件
app.use(bodyParser.json());

// 路由
app.use('/api/users', userRoutes);

// 启动服务器
app.listen(PORT, () => {
  console.log(`服务器运行在 http://localhost:${PORT}`);
});
现在创建用户模型文件：


userModel.js
Apply
// 用户数据存储（内存方式）
let users = [];
let nextId = 1;

// 用户模型
class User {
  constructor(name, email, password) {
    this.id = nextId++;
    this.name = name;
    this.email = email;
    this.password = password; // 实际项目中应该加密存储
    this.createdAt = new Date().toISOString();
    this.updatedAt = new Date().toISOString();
  }
}

// 获取所有用户
exports.getAllUsers = () => {
  return users;
};

// 根据ID获取用户
exports.getUserById = (id) => {
  return users.find(user => user.id === parseInt(id));
};

// 创建新用户
exports.createUser = (userData) => {
  const newUser = new User(userData.name, userData.email, userData.password);
  users.push(newUser);
  return newUser;
};

// 更新用户
exports.updateUser = (id, userData) => {
  const index = users.findIndex(user => user.id === parseInt(id));
  if (index !== -1) {
    users[index] = {
      ...users[index],
      ...userData,
      id: parseInt(id), // 确保ID不变
      updatedAt: new Date().toISOString()
    };
    return users[index];
  }
  return null;
};

// 删除用户
exports.deleteUser = (id) => {
  const index = users.findIndex(user => user.id === parseInt(id));
  if (index !== -1) {
    const deletedUser = users[index];
    users.splice(index, 1);
    return deletedUser;
  }
  return null;
};
创建用户控制器：


userController.js
Apply
const userModel = require('../models/userModel');

// 获取所有用户
exports.getAllUsers = (req, res) => {
  const users = userModel.getAllUsers();
  res.status(200).json(users);
};

// 获取单个用户
exports.getUserById = (req, res) => {
  const user = userModel.getUserById(req.params.id);
  if (user) {
    res.status(200).json(user);
  } else {
    res.status(404).json({ message: '用户不存在' });
  }
};

// 创建用户
exports.createUser = (req, res) => {
  const { name, email, password } = req.body;
  
  // 简单验证
  if (!name || !email || !password) {
    return res.status(400).json({ message: '请提供完整的用户信息' });
  }
  
  const newUser = userModel.createUser({ name, email, password });
  res.status(201).json(newUser);
};

// 更新用户
exports.updateUser = (req, res) => {
  const updatedUser = userModel.updateUser(req.params.id, req.body);
  if (updatedUser) {
    res.status(200).json(updatedUser);
  } else {
    res.status(404).json({ message: '用户不存在' });
  }
};

// 删除用户
exports.deleteUser = (req, res) => {
  const deletedUser = userModel.deleteUser(req.params.id);
  if (deletedUser) {
    res.status(200).json({ message: '用户已删除', user: deletedUser });
  } else {
    res.status(404).json({ message: '用户不存在' });
  }
};
创建用户路由：


userRoutes.js
Apply
const express = require('express');
const router = express.Router();
const userController = require('../controllers/userController');

// 定义所有用户相关路由
router.get('/', userController.getAllUsers);        // 获取所有用户
router.get('/:id', userController.getUserById);     // 获取单个用户
router.post('/', userController.createUser);        // 创建新用户
router.put('/:id', userController.updateUser);      // 更新用户
router.delete('/:id', userController.deleteUser);   // 删除用户

module.exports = router;
这个示例提供了完整的用户管理REST接口，包括：

GET /api/users - 获取所有用户列表
GET /api/users/:id - 根据ID获取特定用户
POST /api/users - 创建新用户
PUT /api/users/:id - 更新现有用户
DELETE /api/users/:id - 删除用户
要运行这个示例，您需要：

安装依赖：npm install
启动服务器：npm start
然后您可以使用Postman或其他API测试工具来测试这些接口。

注意：这是一个简化的示例，实际生产环境中还需要添加身份验证、数据验证、错误处理、密码加密等安全措施。



'↑↓' to navigate input history, 'Shift+Enter' to insert a new line.

Doubao-Seed-Code

运行说明
FastAPI版本运行方式：

安装依赖：pip install -r requirements.txt
启动服务：uvicorn fastapi_app.main:app --reload
访问文档：http://127.0.0.1:8000/docs
SpringBoot版本运行方式：

在 springboot_app 目录下执行：mvn spring-boot:run
或打包后运行：mvn package && java -jar target/user-management-0.0.1-SNAPSHOT.jar
实现特点
参数校验：

FastAPI使用Pydantic V2进行自动参数验证
SpringBoot使用Jakarta Validation API进行参数校验
统一响应格式：

统一的成功/失败响应结构
包含状态码、消息和数据
完整的CRUD操作：

创建(POST)、读取(GET)、更新(PUT)、删除(DELETE)
错误处理：

完善的异常捕获和处理机制
友好的错误提示
内存存储：

两者都使用内存存储数据，方便直接运行测试
所有接口严格对应之前的REST接口设计，保持一致的URL路径和功能。